# 电梯调度系统说明文档
**Operation System Assignment1**

**郑超 1751747**
## 一、项目分析
### 项目背景
某一层楼20层，有五部互联的电梯，基于线程思想，编写一个电梯调度程序。
### 项目目的
- 学习调度算法
- 通过实现电梯调度，体会操作系统调度过程
- 学习特定环境下多线程方法
### 项目需求
- **电梯内部功能键与状态显示**：
  - 数字键、关门键、开门键、上行键、下行键、报警键、当前电梯的楼层数、上升及下降状态等。
- **电梯外部功能键与状态显示**：
  - 上行键、下行键、当前电梯状态的数码显示器。
- **其它**： 
  - 五部电梯外部按钮互联结。（即：当一个电梯按钮按下去时，其他电梯的相应按钮也就同时点亮。）
  - 所有电梯初始状态都在第一层。
  - 每个电梯如果在它的上层或者下层没有相应请求情况下，在原地保持不动。
## 二、开发工具
- **开发环境**：Windows
- **开发工具**：Unity3D
- **开发语言**：C#
## 三、设计思路
### 电梯运行
- **电梯有三个状态**：静止、上行和下行。
  - 若电梯任务列表为空，电梯处于静止状态。
  - 若电梯任务列表不为空，电梯运行遵循以下规则：
    - 加入的第一个任务决定电梯初运行状态。
    - 电梯具有“惯性”，若原本处于上行状态，就会一直保持上行状态，直到再无比当前楼层更高的任务。
### 电梯任务
- **电梯任务分为外部和内部任务**
  - 外部任务来自外部的上下按钮，由总控制器计算分配给某个电梯。
  - 内部任务来自电梯内部的楼层按钮，直接加入电梯任务的列表。
- **总控制器的分配原则**
  - 任务优先分配给运行状态电梯时，但限制任务的楼层数应该处于运行状态电梯当前执行方向的可能停靠楼层中。
  - 若找不到可分配的运行状态电梯，则分配给等待状态的电梯。
  - 若依然无符合要求的电梯，则将任务挂起，放在总控制器的待分配任务列表中。
## 四、实现
### 添加任务
添加任务的方式就是在button控件上添加响应函数。
|函数名|文件|代码位置|
|:--:|:--:|:--:|
|public void UP(int floor)|outsideButtonScript|168-210|
|public void DOWN(int floor)|outsideButtonScript|212-254|
|public void FLOOR(int floor)||22-25|
